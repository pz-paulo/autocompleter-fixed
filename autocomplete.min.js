!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).autocomplete=t()}(this,(function(){"use strict";
/**
     * Copyright (c) 2016 Denis Taran
     *
     * Homepage: https://smartscheduling.com/en/documentation/autocomplete
     * Source: https://github.com/denis-taran/autocomplete
     *
     * MIT License
     */return function(e){var t=document,n=e.container||t.createElement("div"),i=e.preventSubmit||0;n.id=n.id||"autocomplete-"+E();var o,r,a=n.style,s=e.debounceWaitMs||0,c=e.disableAutoSelect||!1,u=n.parentElement,d=[],l="",f=2,p=e.showOnFocus,v=0,m=!1,g=!1;if(void 0!==e.minLength&&(f=e.minLength),!e.input)throw new Error("input undefined");var b=e.input;function E(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function h(){var e=n.parentNode;e&&e.removeChild(n)}function A(){r&&window.clearTimeout(r)}function w(){return!!n.parentNode}function L(){v++,d=[],l="",o=void 0,b.setAttribute("aria-activedescendant",""),b.setAttribute("aria-expanded","false"),h()}function y(){console.log("[AUTOCOMPLETE] update suggestions div"),n.textContent="",b.setAttribute("aria-activedescendant","");var i=function(e,n,i){var o=t.createElement("div");return o.textContent=e.label||"",o};e.render&&(i=e.render);var r=function(e,n){var i=t.createElement("div");return i.textContent=e,i};e.renderGroup&&(r=e.renderGroup);var s=t.createDocumentFragment(),c=E();if(console.log("[AUTOCOMPLETE] selected",o),d.forEach((function(t,a){if(t.group&&t.group!==c){c=t.group;var u=r(t.group,l);u&&(u.className+=" group",s.appendChild(u))}var d=i(t,l,a);d&&(d.id=n.id+"_"+a,d.setAttribute("role","option"),d.addEventListener("click",(function(n){g=!0;try{e.onSelect(t,b)}finally{g=!1}L(),n.preventDefault(),n.stopPropagation()})),console.log("[AUTOCOMPLETE] item is selected "+(t===o),t),t===o&&(d.className+=" selected",d.setAttribute("aria-selected","true"),b.setAttribute("aria-activedescendant",d.id)),s.appendChild(d))})),n.appendChild(s),d.length<1){if(!e.emptyMsg)return void L();var f=t.createElement("div");f.id=n.id+"_"+E(),f.className="empty",f.textContent=e.emptyMsg,n.appendChild(f),b.setAttribute("aria-activedescendant",f.id)}n.parentNode||(u||t.body).appendChild(n),function(){if(w()){b.setAttribute("aria-expanded","true"),a.height="auto",a.width=b.offsetWidth+"px";var i,o=0;r(),r(),e.customize&&i&&e.customize(b,i,n,o)}function r(){var e=t.documentElement,n=e.clientTop||t.body.clientTop||0,r=e.clientLeft||t.body.clientLeft||0,s=window.pageYOffset||e.scrollTop,c=window.pageXOffset||e.scrollLeft,u=(i=b.getBoundingClientRect()).top+b.offsetHeight+s-n,d=i.left+c-r;a.top=u+"px",a.left=d+"px",(o=window.innerHeight-(i.top+b.offsetHeight))<0&&(o=0),a.top=u+"px",a.bottom="",a.left=d+"px",a.maxHeight=o+"px"}}(),k()}function T(){w()&&y()}function x(){T()}function O(e){e.target!==n?T():e.preventDefault()}function C(){g||S(0)}function k(){var e=n.getElementsByClassName("selected");if(e.length>0){var t=e[0],i=t.previousElementSibling;if(i&&-1!==i.className.indexOf("group")&&!i.previousElementSibling&&(t=i),t.offsetTop<n.scrollTop)n.scrollTop=t.offsetTop;else{var o=t.offsetTop+t.offsetHeight,r=n.scrollTop+n.offsetHeight;o>r&&(n.scrollTop+=o-r)}}}function M(e){d.length>0&&(!function(e){var i=t.getElementById(n.id+"_"+e);i&&(i.classList.remove("selected"),i.removeAttribute("aria-selected"),b.removeAttribute("aria-activedescendant"))}(e),function(e){var i=t.getElementById(n.id+"_"+e);console.log("[AUTOCOMPLETE] select suggestion element with id "+n.id+"_"+e,i),i&&(i.classList.add("selected"),i.setAttribute("aria-selected","true"),b.setAttribute("aria-activedescendant",i.id))}(d.indexOf(o)),k())}function N(e,t){var n,i=w();!i||d.length<1||("ArrowUp"===t?(n=d.indexOf(o),o=-1===n?void 0:d[(n+d.length-1)%d.length],M(n)):function(){var e=d.indexOf(o);o=d.length<1?void 0:-1===e?d[0]:d[(e+1)%d.length],M(e)}(),e.preventDefault(),i&&e.stopPropagation(),console.log("[AUTOCOMPLETE] key pressed: "+t+" eventKey: "+e.key),console.log("[AUTOCOMPLETE] items:",d),console.log("[AUTOCOMPLETE] selected:",o))}function D(t){var n=t.key;switch(n){case"ArrowUp":case"ArrowDown":N(t,n);break;case"Escape":case"Tab":L();break;case"Enter":!function(t){if(o){2===i&&t.preventDefault(),g=!0;try{e.onSelect(o,b)}finally{g=!1}L()}1===i&&t.preventDefault()}(t)}}function P(){p&&S(1)}function S(e){b.value.length>=f||1===e?(A(),r=window.setTimeout((function(){return U(b.value,e,b.selectionStart||0)}),0===e||2===e?s:0)):L()}function U(t,n,i){if(!m){var r=++v;e.fetch(t,(function(e){v===r&&e&&(l=t,o=(d=e).length<1||c?void 0:d[0],y())}),n,i)}}function H(t){e.keyup?e.keyup({event:t,fetch:function(){return S(0)}}):w()||"ArrowDown"!==t.key||S(0)}function _(t){e.click&&e.click({event:t,fetch:function(){return S(2)}})}return n.className=[n.className,"autocomplete",e.className||""].join(" ").trim(),n.setAttribute("role","listbox"),b.setAttribute("role","combobox"),b.setAttribute("aria-expanded","false"),b.setAttribute("aria-autocomplete","list"),b.setAttribute("aria-controls",n.id),b.setAttribute("aria-owns",n.id),b.setAttribute("aria-activedescendant",""),b.setAttribute("aria-haspopup","listbox"),a.position="absolute",n.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.addEventListener("focus",(function(){return b.focus()})),h(),b.addEventListener("keyup",H),b.addEventListener("click",_),b.addEventListener("keydown",D),b.addEventListener("input",C),b.addEventListener("focus",P),window.addEventListener("resize",x),t.addEventListener("scroll",O,!0),{destroy:function(){b.removeEventListener("focus",P),b.removeEventListener("keyup",H),b.removeEventListener("click",_),b.removeEventListener("keydown",D),b.removeEventListener("input",C),window.removeEventListener("resize",x),t.removeEventListener("scroll",O,!0),b.removeAttribute("role"),b.removeAttribute("aria-expanded"),b.removeAttribute("aria-autocomplete"),b.removeAttribute("aria-controls"),b.removeAttribute("aria-activedescendant"),b.removeAttribute("aria-owns"),b.removeAttribute("aria-haspopup"),A(),L(),m=!0},fetch:function(){U(b.value,3,b.selectionStart||0)}}}}));
//# sourceMappingURL=autocomplete.min.js.map
